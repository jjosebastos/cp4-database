-- Tabela T_QF_CLIENTE
CREATE TABLE T_QF_CLIENTE (
    id_cliente INTEGER PRIMARY KEY,
    nm_cliente VARCHAR2(100) NOT NULL,
    nr_cpf VARCHAR2(15) UNIQUE NOT NULL,
    dt_nascimento DATE,
    sx_cliente VARCHAR2(2) NOT NULL,
    CONSTRAINT CK_SEXO_CLIENTE
        CHECK (sx_cliente in ('MO', 'FO')),
    st_cliente VARCHAR2(1) NOT NULL
);

-- Tabela T_QF_AUTENTICA
CREATE TABLE T_QF_AUTENTICA (
    id_autentica INTEGER PRIMARY KEY,
    nm_login VARCHAR2(50) UNIQUE NOT NULL,
    vl_senha VARCHAR2(50) NOT NULL,
    id_cliente INTEGER,
    CONSTRAINT FK_T_QF_AUTENTICA_T_QF_CLIENTE FOREIGN KEY (id_cliente)
        REFERENCES T_QF_CLIENTE (id_cliente)
);

-- Tabela T_QF_ENDERECO
CREATE TABLE T_QF_ENDERECO (
    id_endereco INTEGER PRIMARY KEY,
    nr_cep VARCHAR2(15) NOT NULL,
    nm_logradouro VARCHAR2(150) NOT NULL,
    nr_logradouro NUMBER NOT NULL,
    ds_complemento VARCHAR2(150),
    nm_bairro VARCHAR2(150) NOT NULL,
    nm_cidade VARCHAR2(50) NOT NULL,
    sg_uf VARCHAR2(2) NOT NULL,
    pt_referencia VARCHAR(100),
    id_cliente INTEGER,
    CONSTRAINT FK_T_QF_ENDERECO_T_QF_CLIENTE FOREIGN KEY (id_cliente)
        REFERENCES T_QF_CLIENTE (id_cliente)
);

-- TABELA T_QF_CUPOM 
CREATE TABLE T_QF_CUPOM( 
    id_cupom INTEGER PRIMARY KEY,
    cd_cupom VARCHAR2(100) NOT NULL,
    vl_desconto NUMBER(8,2) NOT NULL,
    dt_val_cupom DATE
);

-- Tabela T_QF_PEDIDO
CREATE TABLE T_QF_PEDIDO (
    id_pedido INTEGER PRIMARY KEY,
    dt_hr_pedido DATE NOT NULL,
    st_pedido VARCHAR2(20),
    vl_total NUMBER(8, 2) NOT NULL,
    vl_desconto NUMBER(8, 2) NOT NULL,
    ds_obs_gerais VARCHAR2(255),
    id_cliente INTEGER,
    id_cupom INTEGER,
    CONSTRAINT FK_T_QF_PEDIDO_T_QF_CLIENTE FOREIGN KEY (id_cliente)
        REFERENCES T_QF_CLIENTE (id_cliente),
    CONSTRAINT FK_T_QF_PEDIDO_T_QF_CUPOM FOREIGN KEY (id_cupom)
        REFERENCES T_QF_CUPOM (id_cupom)
);


-- Tabela T_QF_ITEM_PEDIDO
CREATE TABLE T_QF_ITEM_PEDIDO (
    id_item INTEGER PRIMARY KEY,
    qt_produto INTEGER NOT NULL,
    vl_subtotal NUMBER (8, 2) NOT NULL,
    vl_desconto NUMBER(8, 2) NOT NULL,
    id_pedido INTEGER,
    id_produto INTEGER,
    CONSTRAINT FK_T_QF_ITEM_PEDIDO_T_QF_PEDIDO FOREIGN KEY (id_pedido)
        REFERENCES T_QF_PEDIDO (id_pedido),
    CONSTRAINT FK_T_QF_ITEM_PEDIDO_T_QF_PRODUTO FOREIGN KEY (id_produto)
        REFERENCES T_QF_PRODUTO (id_produto)
);


-- Tabela T_QF_PAGAMENTO
CREATE TABLE T_QF_PAGAMENTO (
    id_pagamento INTEGER PRIMARY KEY,
    ds_forma_pagamento VARCHAR2(50) NOT NULL,
    vl_pagamento DECIMAL(5, 2) NOT NULL,
    dt_hr_pagamento DATE,
    st_pagamento VARCHAR2(20) NOT NULL,
    id_pedido INTEGER,
    CONSTRAINT FK_T_QF_PAGAMENTO_T_QF_PEDIDO FOREIGN KEY (id_pedido)
        REFERENCES T_QF_PEDIDO (id_pedido)
);


-- Tabela T_QF_CATEGORIA
CREATE TABLE T_QF_CATEGORIA (
    id_categoria INTEGER PRIMARY KEY,
    ds_categoria VARCHAR2(1500) UNIQUE NOT NULL
);

-- Tabela T_QF_MARCA
CREATE TABLE T_QF_MARCA (
    id_marca INTEGER PRIMARY KEY,
    ds_marca VARCHAR2(100) UNIQUE NOT NULL
);

-- Tabela T_QF_PRODUTO
CREATE TABLE T_QF_PRODUTO (
    id_produto INTEGER PRIMARY KEY,
    ds_produto VARCHAR2(150)UNIQUE NOT NULL,
    vl_produto NUMBER(6, 2) NOT NULL,
    vl_peso NUMBER(5, 2) NOT NULL,
    ds_dimensoes VARCHAR2(20) NOT NULL,
    id_categoria INTEGER,
    id_marca INTEGER,
    CONSTRAINT FK_T_QF_PRODUTO_T_QF_CATEGORIA FOREIGN KEY (id_categoria)
        REFERENCES T_QF_CATEGORIA (id_categoria),
    CONSTRAINT FK_T_QF_PRODUTO_T_QF_MARCA FOREIGN KEY (id_marca)
        REFERENCES T_QF_MARCA (id_marca)
);


-- Tabela T_QF_ARMAZEM
CREATE TABLE T_QF_ARMAZEM (
    id_armazem INTEGER PRIMARY KEY,
    ds_armazem VARCHAR2(100) UNIQUE NOT NULL,
    ds_local_armazem VARCHAR(100)
);

-- Tabela T_QF_ESTOQUE
CREATE TABLE T_QF_ESTOQUE (
    id_estoque INTEGER PRIMARY KEY,
    vl_quantidade INTEGER,
    id_armazem INTEGER,
    id_produto INTEGER,
    CONSTRAINT FK_T_QF_ESTOQUE_T_QF_PRODUTO FOREIGN KEY (id_produto)
        REFERENCES T_QF_PRODUTO (id_produto),
    CONSTRAINT FK_T_QF_ESTOQUE_T_QF_ARMAZEM FOREIGN KEY (id_armazem)
        REFERENCES T_QF_ARMAZEM (id_armazem)
);

DROP TABLE T_QF_PAGAMENTO;
DROP TABLE T_QF_ITEM_PEDIDO;
DROP TABLE T_QF_ENDERECO;
DROP TABLE T_QF_PEDIDO;
DROP TABLE T_QF_CLIENTE;
DROP TABLE T_QF_ESTOQUE;
DROP TABLE T_QF_PRODUTO;
DROP TABLE T_QF_ARMAZEM;
DROP TABLE T_QF_AUTENTICA;
DROP TABLE T_QF_CUPOM;
DROP TABLE T_QF_MARCA;
DROP TABLE T_QF_CATEGORIA;
